<div id="dashboard" class="dashboard">
    <!--Nested LobiPanel example-->
    <div id="lobipanel-nested-examplex">
        <div class="panel panel-info lobipanel">
            <div class="panel-heading">
                <div class="panel-title">
                    <h4>Home</h4>
                </div>
            </div>
            <div class="panel-body">
                <div class="row">
                <div class="col-lg-6">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="panel-title">
                            <h4>google</h4>
                        </div>
                    </div>
                    <div class="panel-body">
                            <webview id="foo00" src="https://mail.google.com/a/chadcollins.com" preload="js/webview-helper.js" style="height:350px"></webview>
                    </div>
                </div>
            </div>
               <div class="col-lg-6">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="panel-title">
                            <h4>slack</h4>
                        </div>
                    </div>
                    <div class="panel-body">
                            <webview id="foo01" src="https://chadcollins.slack.com/messages/" preload="js/webview-helper.js" style="height:350px"></webview>
                    </div>
                </div>
                </div>
            </div>
                <div id="data-body" class="row">

                </div>
            </div>
        </div>
    </div>
</div>
    
<script>
    var panels = {
        "ce9cbee0-424e-4b23-a646-57d643a436cc": {
            "url": "https://google.com",
            "name": "mail"
        },
        "raa1a9a5-876c-4396-8904-8111791660f6": {
            "url": "https://google.com",
            "name": "mail"
        },
        "ed1687b8-3ac4-4457-8bba-a1e06f17f6c4": {
            "url": "https://google.com",
            "name": "mail"
        },
        "p0d81d23-87c3-4ece-91d2-785b140b4c1c": {
            "url": "https://google.com",
            "name": "mail"
        }
    }

    function initPage() {
        //Initialize lobipanels
        $('.panel').lobiPanel({
            reload: false,
            sortable: true
        });

        $('#lobipanel-multiple .panel').lobiPanel({
            sortable: true
        });
    }
    initPage();
    $(document).ready(function() {

        var html = '';
        var flag = 0;
        $.each(panels, function(index, v) {

            html += '<div class="col-lg-3">';
            html += '<div class="panel panel-default">';
            html += '<div class="panel-heading">';
            html += '<div class="panel-title">';
            html += '<h4>' + v["name"] + '</h4>';
            html += '</div>';
            html += '</div>';
            html += '<div class="panel-body">';
            html += '<webview id="' + index + '" src="' + v["url"] + '" preload="js/webview-helper.js"></webview>';
            html += '</div>';
            html += '</div>';
            html += '</div>';

            $('#data-body').append(html);
            html = "";
            setPropertyWV(index);

        });
        $('.panel').lobiPanel({
            sortable: true
        });

    });

    function setPropertyWV(_index) {


        var el = document.getElementById(_index);
        console.log(_index);

        //html += '</div>';
        /// const el = document.getElementById(index);
        //const indicator = document.querySelector('.indicator')

        //const loadstart = () => {
        //  indicator.innerText = 'loading...'
        //}

        const loadstop = () => {
            //indicator.innerText = ''
            document.getElementById(_index).send("zoomOutFull-7.5");
            //console.log('test');
        }

        el.addEventListener('did-stop-loading', loadstop);

    }
</script>
